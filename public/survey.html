<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Friends Finder</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4"
        crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp"
        crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Rokkitt" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/style.css">
</head>

<body>
   <section id="header">
        <div class="container">
            <div class="text-center">
                <h1>
                  <i class="fas fa-users text-center"></i>&nbsp;&nbsp;Friend Finder</h1>
                <h2 >Answer a few basic questions.
                  <br /> Then find the friend with the greatest compatibility!</h2>
                
              </div>
        </div>
    </section>

    <div class="container">
        <br />
        <span class="h2-custom">About You</span>
        <form method="POST" id="survey-form">
            <div class="form-group">
                <label for="Name">
                    <h3>
                        <i class="fas fa-users"></i> Name (Required)</h3>
                </label>
                <input type="input" class="form-control" id="name" placeholder="Enter Name" required>
            </div>
            <div class="form-group">
                <label for="Image">
                    <h3>
                        <i class="fas fa-users"></i> Link to Photo Image (Required)</h3>
                </label>
                <input type="link" class="form-control" id="photo" placeholder="Link to Photo" required>
            </div>
            <div class="form-group">
                <h3>
                    <i class="fas fa-users"></i> Question 1</h3>
                <h5>Your mind is always buzzing with unexplored ideas and plans.</h5>
                <select class="chosen-select" id="q1">
                    <option value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
            <div class="form-group">
                <h3>
                    <i class="fas fa-users"></i> Question 2</h3>
                <h5>Generally speaking, you rely more on your experience than your imagination.</h5>
                <select class="chosen-select" id="q2">
                    <option value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
            <div class="form-group">
                <h3>
                    <i class="fas fa-users"></i> Question 3</h3>
                <h5>You find it easy to stay relaxed and focused even when there is some pressure.</h5>
                <select class="chosen-select" id="q3">
                    <option value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
            <div class="form-group">
                <h3>
                    <i class="fas fa-users"></i> Question 4</h3>
                <h5>You rarely do something just out of sheer curiosity.</h5>
                <select class="chosen-select" id="q4">
                    <option value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
            <div class="form-group">
                <h3>
                    <i class="fas fa-users"></i> Question 5</h3>
                <h5>People can rarely upset you.</h5>
                <select class="chosen-select" id="q5">
                    <option value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
            <div class="form-group">
                <h3>
                    <i class="fas fa-users"></i> Question 6</h3>
                <h5>It is often difficult for you to relate to other people’s feelings.</h5>
                <select class="chosen-select" id="q6">
                    <option value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
            <div class="form-group">
                <h3>
                    <i class="fas fa-users"></i> Question 7</h3>
                <h5>In a discussion, truth should be more important than people’s sensitivities.</h5>
                <select class="chosen-select" id="q7">
                    <option value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
            <div class="form-group">
                <h3>
                    <i class="fas fa-users"></i> Question 8</h3>
                <h5>You rarely get carried away by fantasies and ideas.</h5>
                <select class="chosen-select" id="q8">
                    <option value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
            <div class="form-group">
                <h3>
                    <i class="fas fa-users"></i> Question 9</h3>
                <h5>You think that everyone’s views should be respected regardless of whether they are supported by facts or
                    not.
                </h5>
                <select class="chosen-select" id="q9">
                    <option value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
            <div class="form-group">
                <h3>
                    <i class="fas fa-users"></i> Question 10</h3>
                <h5>You feel more energetic after spending time with a group of people.</h5>
                <select class="chosen-select" id="q10">
                    <option value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
            <br>
            <button type="submit" class="submit btn btn-lg btn-secondary">
                <h3>
                    <i class="fas fa-users"></i> Submit</h3>
            </button>
            <br>
            <br>
        </form>
    </div>
    <div class="container">
        <footer class="footer float-right">
            <div class="container">
                <p>
                    <i class="fas fa-users"></i>
                    <a href="/">Home</a>
                    <i class="fas fa-users"></i>
                    <a href="/api/friends" target="_blank">API Friends List</a>
                    <i class="fas fa-users"></i>
                    <a href="https://github.com/MinalKarani/FriendFinder" target="_blank">GitHub Repo</a>
                </p>
            </div>
        </footer>
    </div>
 <!-- Modal -->
 <div id="resultsModal" class="modal fade" role="dialog">
        <div class="modal-dialog">
  
          <!-- Modal content-->
          <div class="modal-content">
            <div class="modal-header">
              <span class="modal-title h2-custom text-center"><strong>Your most compatible friend</strong></span>
              <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body text-center">
              <h2 id="matchName"></h2>
              <img id="matchImg" src ="" alt="" height="350" width="300">
            </div>
            <div class="modal-footer"></div>
          </div>
  
        </div>
      </div>


</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ"
    crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm"
    crossorigin="anonymous"></script>
<script>
    // Grab the URL of the website
    var currentURL = window.location.origin;
    // Get the form inputs
    $(".submit").on("click", function () {
        event.preventDefault();
        // Form validation
        function validateForm() {
            var isValid = true;
            //Check to see if Name and Photo are filled
            $(".form-control").each(function() {
                if ($(this).val() === "") {
                    isValid = false;
                }
            });
            //Check to see if all answers are filled
            $(".chosen-select").each(function() {
                if ($(this).val() === "") {
                    isValid = false;
                }
            });
            return isValid;
        }//End of validateForm()
        // If all required fields are filled
        if (validateForm()) {
            // Create an object for the user's data
            var userData = {
                name: $("#name").val(),
                photo: $("#photo").val(),
                scores: [
                    $("#q1").val(),
                    $("#q2").val(),
                    $("#q3").val(),
                    $("#q4").val(),
                    $("#q5").val(),
                    $("#q6").val(),
                    $("#q7").val(),
                    $("#q8").val(),
                    $("#q9").val(),
                    $("#q10").val(),
                ]
            }//End of userData
            
            // AJAX post the data to the friends API.
            $.post("/api/friends", userData, function (data) {
                // Grab the result from the AJAX post so that the best match's name and photo are displayed.
                $("#matchName").text(data.name);
                $('#matchImg').attr("src", data.photo);
                // Show the modal with the best match
                $("#resultsModal").modal('toggle');
                // clear the input fields in the form
                $("#name").val("");
                $("#photo").val("");
                $(".modal-footer").html("<h3><i class='fas fa-users'></i>  FriendFinder</h3>");
            });
            //Close modal and go to home page
            $('#closeModal').click(function () {
                $.get('/', function (req, res) {
                    location.replace(res);
                })
            });
        } else {
            $(".modal-title").text("Missing Required Information");
            $(".modal-body").html("<h3>Please answer all questions to help finding your best match.</h3>");
            $(".modal-footer").html("<h3><i class='fas fa-users'></i>  FriendFinder</h3>");
            $("#resultsModal").modal('toggle');
        }
    });
</script>
</html>